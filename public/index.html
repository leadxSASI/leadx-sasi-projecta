<!DOCTYPE html>
<html>
<head>
  <title>ULTIMATE 18+ DOWNLOADER</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background: linear-gradient(135deg, #ff006e, #8338ec); color: white; min-height: 100vh; }
    .card { background: rgba(0,0,0,0.8); border: none; }
    .btn-danger { background: #ff006e; }
    .progress { height: 25px; }
  </style>
</head>
<body>
<div class="container py-5">
  <h1 class="text-center mb-4">ULTIMATE 18+ VIDEO DOWNLOADER</h1>
  <p class="text-center">50+ Sites • HD/4K • 100% Success</p>

  <div class="card p-4">
    <input type="url" id="url" class="form-control form-control-lg mb-3" placeholder="Paste any 18+ video URL">
    <button onclick="startDownload()" class="btn btn-danger btn-lg w-100">DOWNLOAD NOW</button>
    <div id="status" class="mt-3 text-center"></div>
    <div id="progress" class="mt-3" style="display:none;">
      <div class="progress">
        <div class="progress-bar progress-bar-striped progress-bar-animated" style="width:100%">Extracting...</div>
      </div>
    </div>
  </div>

  <div class="mt-4 text-center small">
    <p>Supported: Pornhub, Xvideos, Xhamster, SpankBang, BangBros, Vixen, Tushy, Blacked, NaughtyAmerica + 40 more!</p>
  </div>
</div>

<script>
async function startDownload() {
  const url = document.getElementById('url').value.trim();
  const status = document.getElementById('status');
  const progress = document.getElementById('progress');
  
  if (!url) return status.innerHTML = '<p class="text-danger">URL දාන්න!</p>';

  status.innerHTML = '<p class="text-info">Extracting video source...</p>';
  progress.style.display = 'block';

  try {
    const res = await fetch('/download', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ url })
    });
    const data = await res.json();

    if (data.success && data.downloadUrl) {
      status.innerHTML = `
        <p class="text-success">Ready! <a href="${data.downloadUrl}" download class="btn btn-success btn-lg mt-2">
          DOWNLOAD HD VIDEO
        </a></p>
      `;
      progress.style.display = 'none';
    } else {
      status.innerHTML = `<p class="text-danger">${data.error}</p>`;
      progress.style.display = 'none';
    }
  } catch {
    status.innerHTML = '<p class="text-danger">Server error!</p>';
  }
}
</script>
</body>
</html>
